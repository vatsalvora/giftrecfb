<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <title>jQuery Example</title>
    <script>
      $(document).ready(function() {
        $.ajaxSetup({ cache: true });
		  $.getScript('//connect.facebook.net/en_UK/all.js', function(){
			FB.init({
			  appId: '799066233444105',
			});
			FB.login(function(){}, {scope: 'user_likes,user_friends,friends_likes'});			
			$('#loginbutton').removeAttr('disabled');
			FB.getLoginStatus(updateStatusCallback);
		  });
      });
	  function updateStatusCallback(){
		// Your logic here
		 console.log('Welcome!  Fetching your information.... ');
		var friendName = prompt("Name of Friend?").toLowerCase();
		var getLikes = function(id,name,list){
			FB.api('/'+id+'/likes', function(response){
				console.log(response);
				var category = prompt("What Category do you want to Compare?").toLowerCase();
				var usercat = {};
				var fricat = {};
				for(var j=0; j<list.length; j++)
				{
					$('#userlikes').append("<li>"+ list[j]["name"] + "</li>");
					if(list[j]["category"].toLowerCase()===category)
					{
						usercat[list[j]["name"]] = true;
					}
				}
				$('#friendlikes').append("<h4>"+ name + "</h4>");
				for(var k=0; k<response.data.length; k++)
				{
					$('#friendlikes').append("<li>"+ response.data[k]["name"] + "</li>");
					if(response.data[k]["category"].toLowerCase()===category)
					{
						fricat[response.data[k]["name"]] = true;
					}
				}
				console.log(usercat);
				console.log(fricat);
				for(var l in fricat)
				{
					if(!(l in usercat))
					{
						$('#cat').append("<li>"+ l + "</li>");
					}
				}
			});
		}
		FB.api(
		'/me/friends',
		function (response) {
		  if (response && !response.error) {
			console.log(response.data[0]["name"]);
			FB.api('/me/likes',function(likes){
				for(var i=0; i<response.data.length; i++)
				{
					var name = response.data[i]["name"];
					var id = response.data[i]["id"];
					
					if(name.toLowerCase() === friendName)
					{
						$('#imp').append("<li>" + name + "</li>");
						getLikes(id,name,likes.data);
					}
					else
					{
						$('#disp').append("<li>"+ name + "</li>");
					}
				}
				console.log(likes);
			});
		  }
		  });
		
	}
    </script>
</head>
<body>
<div id="fb-root"></div>
<div id="loginbutton">
<fb:login-button show-faces="true" width="200" max-rows="1"></fb:login-button>
</div>
<h3>Under Development!!!</h3>
<div id="imp">
<h3>Selected Information!!!</h3>
</div>
<div id = "cat">
<h3>Category!!</h3>
</div>
<div id ="friendlikes">
<h3>Friend Likes!!!</h3>
</div>
<div id ="userlikes">
<h3>User Likes!!!</h3>
</div>
<div id="disp">
<h3>Complete Information!!!</h3>
</div>
<br>
</body>
</html>